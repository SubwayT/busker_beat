<div id="map" style="height: 600px; width: 100%;"></div>
<script>
    const posts = JSON.parse('{{ posts | tojson | safe }}');
    const map = L.map('map').setView([35.6812, 139.7671], 6);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    posts.forEach(post => {
        const marker = L.marker([post[2], post[3]]).addTo(map);
        marker.bindPopup(`
            <strong>${post[1]}</strong><br>
            開催日: ${post[5]}<br>
            投げ銭: ${post[4]}円<br>
            セトリ: ${post[6]}
        `);
    });
</script>